{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../components/Layout';\nimport fetch from 'isomorphic-unfetch';\nimport Link from 'next/link';\nimport Button from 'react-bootstrap/Button';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFlag, faShare, faEllipsisV } from '@fortawesome/free-solid-svg-icons';\nimport absoluteUrl from 'next-absolute-url';\nimport CompactOptionsToggle from '../components/CompactOptionsToggle';\nimport PollPagination from '../components/PollPagination';\nimport PollCard from '../components/PollCard';\nimport { withRouter } from 'next/router';\n\nclass Home extends React.Component {\n  static async getInitialProps({\n    req\n  }) {\n    const {\n      origin\n    } = absoluteUrl(req);\n    const res = await fetch(`${origin}/api/polls/page/1`, {\n      method: 'GET',\n      headers: {\n        'X-Origin': 'statmix'\n      }\n    });\n    const data = await res.json();\n    return {\n      polls: data.pollsArr,\n      totalItems: data.totalItems\n    };\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      polls,\n      totalItems,\n      router\n    } = this.props;\n    return __jsx(Layout, {\n      pageTitle: \"StatMix\",\n      pageDesc: \"Create polls and vote\"\n    }, __jsx(\"h4\", {\n      className: \"page-header\"\n    }, \"Recent Polls\"), __jsx(\"hr\", null), polls.map((poll, i) => __jsx(PollCard, {\n      key: i,\n      poll: poll\n    })), __jsx(PollPagination, {\n      active: 1,\n      totalItems: totalItems,\n      path: router.asPath\n    }));\n  }\n\n}\n\nexport default withRouter(Home);","map":{"version":3,"sources":["E:/Users/Jordan/Desktop/statmix/pages/index.js"],"names":["Layout","fetch","Link","Button","Dropdown","FontAwesomeIcon","faFlag","faShare","faEllipsisV","absoluteUrl","CompactOptionsToggle","PollPagination","PollCard","withRouter","Home","React","Component","getInitialProps","req","origin","res","method","headers","data","json","polls","pollsArr","totalItems","constructor","props","render","router","map","poll","i","asPath"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,MAAT,EAAiBC,OAAjB,EAA0BC,WAA1B,QAA6C,mCAA7C;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,oBAAP,MAAiC,oCAAjC;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,SAASC,UAAT,QAA2B,aAA3B;;AAEA,MAAMC,IAAN,SAAmBC,KAAK,CAACC,SAAzB,CAAmC;AACjC,eAAaC,eAAb,CAA6B;AAACC,IAAAA;AAAD,GAA7B,EAAoC;AAClC,UAAM;AAAEC,MAAAA;AAAF,QAAaV,WAAW,CAACS,GAAD,CAA9B;AACA,UAAME,GAAG,GAAG,MAAMnB,KAAK,CAAE,GAAEkB,MAAO,mBAAX,EAA+B;AACpDE,MAAAA,MAAM,EAAE,KAD4C;AAEpDC,MAAAA,OAAO,EAAE;AACP,oBAAY;AADL;AAF2C,KAA/B,CAAvB;AAMA,UAAMC,IAAI,GAAG,MAAMH,GAAG,CAACI,IAAJ,EAAnB;AAEA,WAAO;AACLC,MAAAA,KAAK,EAAEF,IAAI,CAACG,QADP;AAELC,MAAAA,UAAU,EAAEJ,IAAI,CAACI;AAFZ,KAAP;AAID;;AAEDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAED;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEL,MAAAA,KAAF;AAASE,MAAAA,UAAT;AAAqBI,MAAAA;AAArB,QAAgC,KAAKF,KAA3C;AACA,WACE,MAAC,MAAD;AAAQ,MAAA,SAAS,EAAC,SAAlB;AAA4B,MAAA,QAAQ,EAAC;AAArC,OACE;AAAI,MAAA,SAAS,EAAC;AAAd,sBADF,EAEE,iBAFF,EAGGJ,KAAK,CAACO,GAAN,CAAU,CAACC,IAAD,EAAOC,CAAP,KACT,MAAC,QAAD;AAAU,MAAA,GAAG,EAAEA,CAAf;AAAkB,MAAA,IAAI,EAAED;AAAxB,MADD,CAHH,EA8DE,MAAC,cAAD;AAAgB,MAAA,MAAM,EAAE,CAAxB;AAA2B,MAAA,UAAU,EAAEN,UAAvC;AAAmD,MAAA,IAAI,EAAEI,MAAM,CAACI;AAAhE,MA9DF,CADF;AAkED;;AA1FgC;;AA6FnC,eAAetB,UAAU,CAACC,IAAD,CAAzB","sourcesContent":["import Layout from '../components/Layout';\nimport fetch from 'isomorphic-unfetch';\nimport Link from 'next/link';\nimport Button from 'react-bootstrap/Button';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFlag, faShare, faEllipsisV } from '@fortawesome/free-solid-svg-icons';\nimport absoluteUrl from 'next-absolute-url';\nimport CompactOptionsToggle from '../components/CompactOptionsToggle';\nimport PollPagination from '../components/PollPagination';\nimport PollCard from '../components/PollCard';\nimport { withRouter } from 'next/router';\n\nclass Home extends React.Component {\n  static async getInitialProps({req}) {\n    const { origin } = absoluteUrl(req);\n    const res = await fetch(`${origin}/api/polls/page/1`, {\n      method: 'GET',\n      headers: {\n        'X-Origin': 'statmix',\n      }\n    });\n    const data = await res.json();\n  \n    return {\n      polls: data.pollsArr,\n      totalItems: data.totalItems\n    }\n  }\n\n  constructor(props) {\n    super(props);\n\n  }\n\n  render() {\n    const { polls, totalItems, router } = this.props;\n    return (\n      <Layout pageTitle='StatMix' pageDesc='Create polls and vote' >\n        <h4 className='page-header'>Recent Polls</h4>\n        <hr />\n        {polls.map((poll, i) => (\n          <PollCard key={i} poll={poll} />\n        ))}\n        {/*polls.map(poll => (\n          <div className='poll-card-container' key={poll.url}>\n            <Link href={`/poll/${poll.url}`}>\n              <a>\n                <h6 className='poll-card-title'>\n                  {poll.title}\n                </h6>\n              </a>\n            </Link>\n            <hr />\n            <div className='poll-card-desc'>\n              {poll.desc.length > 0 ? <p>{poll.desc}</p> : <i>No Description</i> }\n            </div>\n            <hr />\n            <div className='poll-card-actions'>\n              <div>\n                <Link href={{ pathname: '/poll', query: { slug: poll.url } }} as={`/poll/${poll.url}`}>\n                  <a>\n                    <Button variant=\"grey-blue\" size=\"sm\">\n                      View Poll\n                    </Button>\n                  </a>\n                </Link>\n                <div className='poll-stat' style={{ lineHeight: '2.5', marginLeft: '0.75rem' }}>\n                  <span>{poll.totalVotes} votes â€¢ {poll.dateCreated}</span>\n                </div>\n              </div>\n              <div className='poll-card-actions-options'>\n                <div>\n                  <span>\n                    <FontAwesomeIcon icon={faShare} /> Share\n                  </span>\n                  <span>\n                    <FontAwesomeIcon icon={faFlag} /> Report\n                  </span>\n                </div>\n                <div className='poll-card-actions-compact'>\n                  <Dropdown alignRight>\n                    <Dropdown.Toggle as={CompactOptionsToggle} id=\"dropdown-custom-components\">\n                      <FontAwesomeIcon icon={faEllipsisV} />\n                    </Dropdown.Toggle>\n\n                    <Dropdown.Menu>\n                      <Dropdown.Item as={Button}>\n                        <FontAwesomeIcon icon={faShare} /> Share\n                      </Dropdown.Item>\n                      <Dropdown.Item as={Button}>\n                        <FontAwesomeIcon icon={faFlag} /> Report\n                      </Dropdown.Item>\n                    </Dropdown.Menu>\n                  </Dropdown>\n                </div>\n              </div>\n            </div>\n          </div>\n        ))*/}\n        <PollPagination active={1} totalItems={totalItems} path={router.asPath} />\n      </Layout>\n    )\n  }\n}\n\nexport default withRouter(Home)\n"]},"metadata":{},"sourceType":"module"}