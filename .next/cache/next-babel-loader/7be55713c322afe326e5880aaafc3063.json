{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../components/Layout';\nimport fetch from 'isomorphic-unfetch';\nimport Link from 'next/link';\nimport Button from 'react-bootstrap/Button';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFlag, faShare, faEllipsisV, faFilter } from '@fortawesome/free-solid-svg-icons';\nimport absoluteUrl from 'next-absolute-url';\nimport PollPagination from '../components/PollPagination';\nimport PollCard from '../components/PollCard';\nimport { withRouter } from 'next/router';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport VoteHistory from '../components/VoteHistory';\nimport Router from 'next/router';\n\nclass Home extends React.Component {\n  static async getInitialProps(ctx) {\n    const {\n      origin\n    } = absoluteUrl(ctx.req);\n    const {\n      page\n    } = ctx.query;\n    const searchPage = page < 1 || page == undefined ? 1 : page;\n    const res = await fetch(`${origin}/api/v1/polls?page=${searchPage}`, {\n      method: 'POST'\n    });\n    const data = await res.json();\n    return {\n      polls: data.pollsArr,\n      totalItems: data.totalItems\n    };\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      polls,\n      totalItems\n    } = this.props;\n    return __jsx(Layout, {\n      pageTitle: \"ThatPoll\",\n      path: this.props.router.asPath,\n      ads: true\n    }, __jsx(\"h4\", {\n      className: \"page-header\"\n    }, \"Recent Polls\"), __jsx(\"hr\", null), __jsx(Row, null, __jsx(Col, {\n      md: 9\n    }, polls.length === 0 ? __jsx(\"div\", {\n      className: \"no-polls-card\"\n    }, __jsx(\"h4\", null, \"No Polls Found\")) : __jsx(\"div\", null, polls.map((poll, i) => __jsx(PollCard, {\n      key: i,\n      poll: poll\n    })), __jsx(PollPagination, {\n      totalItems: totalItems\n    }))), __jsx(Col, null, __jsx(VoteHistory, null))));\n  }\n\n}\n\nexport default withRouter(Home);","map":{"version":3,"sources":["E:/Users/Jordan/Desktop/thatpoll/pages/index.js"],"names":["Layout","fetch","Link","Button","Dropdown","FontAwesomeIcon","faFlag","faShare","faEllipsisV","faFilter","absoluteUrl","PollPagination","PollCard","withRouter","Row","Col","VoteHistory","Router","Home","React","Component","getInitialProps","ctx","origin","req","page","query","searchPage","undefined","res","method","data","json","polls","pollsArr","totalItems","constructor","props","render","router","asPath","length","map","poll","i"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,MAAT,EAAiBC,OAAjB,EAA0BC,WAA1B,EAAuCC,QAAvC,QAAuD,mCAAvD;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,MAAP,MAAmB,aAAnB;;AAEA,MAAMC,IAAN,SAAmBC,KAAK,CAACC,SAAzB,CAAmC;AACjC,eAAaC,eAAb,CAA6BC,GAA7B,EAAkC;AAChC,UAAM;AAAEC,MAAAA;AAAF,QAAab,WAAW,CAACY,GAAG,CAACE,GAAL,CAA9B;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAWH,GAAG,CAACI,KAArB;AACA,UAAMC,UAAU,GAAGF,IAAI,GAAG,CAAP,IAAYA,IAAI,IAAIG,SAApB,GAAgC,CAAhC,GAAoCH,IAAvD;AACA,UAAMI,GAAG,GAAG,MAAM5B,KAAK,CAAE,GAAEsB,MAAO,sBAAqBI,UAAW,EAA3C,EAA8C;AACnEG,MAAAA,MAAM,EAAE;AAD2D,KAA9C,CAAvB;AAGA,UAAMC,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;AAEA,WAAO;AACLC,MAAAA,KAAK,EAAEF,IAAI,CAACG,QADP;AAELC,MAAAA,UAAU,EAAEJ,IAAI,CAACI;AAFZ,KAAP;AAID;;AAEDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAED;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEL,MAAAA,KAAF;AAASE,MAAAA;AAAT,QAAwB,KAAKE,KAAnC;AACA,WACE,MAAC,MAAD;AACE,MAAA,SAAS,EAAC,UADZ;AAEE,MAAA,IAAI,EAAE,KAAKA,KAAL,CAAWE,MAAX,CAAkBC,MAF1B;AAGE,MAAA,GAAG,EAAE;AAHP,OAKE;AAAI,MAAA,SAAS,EAAC;AAAd,sBALF,EAME,iBANF,EAQE,MAAC,GAAD,QACE,MAAC,GAAD;AAAK,MAAA,EAAE,EAAE;AAAT,OAgBIP,KAAK,CAACQ,MAAN,KAAiB,CAAjB,GACA;AAAK,MAAA,SAAS,EAAC;AAAf,OACE,mCADF,CADA,GAKA,mBACGR,KAAK,CAACS,GAAN,CAAU,CAACC,IAAD,EAAOC,CAAP,KACT,MAAC,QAAD;AAAU,MAAA,GAAG,EAAEA,CAAf;AAAkB,MAAA,IAAI,EAAED;AAAxB,MADD,CADH,EAIE,MAAC,cAAD;AAAgB,MAAA,UAAU,EAAER;AAA5B,MAJF,CArBJ,CADF,EA8BE,MAAC,GAAD,QACE,MAAC,WAAD,OADF,CA9BF,CARF,CADF;AA6CD;;AApEgC;;AAuEnC,eAAetB,UAAU,CAACK,IAAD,CAAzB","sourcesContent":["import Layout from '../components/Layout';\nimport fetch from 'isomorphic-unfetch';\nimport Link from 'next/link';\nimport Button from 'react-bootstrap/Button';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFlag, faShare, faEllipsisV, faFilter } from '@fortawesome/free-solid-svg-icons';\nimport absoluteUrl from 'next-absolute-url';\nimport PollPagination from '../components/PollPagination';\nimport PollCard from '../components/PollCard';\nimport { withRouter } from 'next/router';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport VoteHistory from '../components/VoteHistory';\nimport Router from 'next/router';\n\nclass Home extends React.Component {\n  static async getInitialProps(ctx) {\n    const { origin } = absoluteUrl(ctx.req);\n    const { page } = ctx.query;\n    const searchPage = page < 1 || page == undefined ? 1 : page;\n    const res = await fetch(`${origin}/api/v1/polls?page=${searchPage}`, {\n      method: 'POST',\n    });\n    const data = await res.json();\n  \n    return {\n      polls: data.pollsArr,\n      totalItems: data.totalItems\n    }\n  }\n\n  constructor(props) {\n    super(props);\n\n  }\n\n  render() {\n    const { polls, totalItems } = this.props;\n    return (\n      <Layout\n        pageTitle='ThatPoll'\n        path={this.props.router.asPath}\n        ads={true}\n      >\n        <h4 className='page-header'>Recent Polls</h4>\n        <hr />\n        \n        <Row>\n          <Col md={9}>\n{/*            <div className='filter-container'>\n              <div style={{ lineHeight: 1.8 }}>\n                <FontAwesomeIcon icon={faFilter} /> Filter\n              </div>\n              <Dropdown alignRight>\n                <Dropdown.Toggle variant='simple' id=\"dropdown-phase\" size='sm'>\n                  Any Voting Phase\n                </Dropdown.Toggle>\n                <Dropdown.Menu>\n                  <Dropdown.Item eventKey=\"1\">Active</Dropdown.Item>\n                  <Dropdown.Item eventKey=\"2\">Ended</Dropdown.Item>\n                </Dropdown.Menu>\n              </Dropdown>\n\n    </div>*/}\n            { polls.length === 0 ?\n              <div className='no-polls-card'>\n                <h4>No Polls Found</h4>\n              </div>\n            :\n              <div>\n                {polls.map((poll, i) => (\n                  <PollCard key={i} poll={poll} />\n                ))}\n                <PollPagination totalItems={totalItems} />\n              </div>\n            }\n          </Col>\n          <Col>\n            <VoteHistory />\n          </Col>\n        </Row>\n      </Layout>\n    )\n  }\n}\n\nexport default withRouter(Home)\n"]},"metadata":{},"sourceType":"module"}