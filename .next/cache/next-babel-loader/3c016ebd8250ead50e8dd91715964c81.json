{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Card from 'react-bootstrap/Card';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Link from 'next/link';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport ListGroupItem from 'react-bootstrap/ListGroupItem';\nimport Accordion from 'react-bootstrap/Accordion';\n\nclass VoteHistory extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      history: []\n    };\n    this.deleteHistory = this.deleteHistory.bind(this);\n    this.clearHistory = this.clearHistory.bind(this);\n  }\n\n  componentDidMount() {\n    // get history from localstorage\n    //console.log(localStorage.voteHistory)\n    if (localStorage.voteHistory) {\n      const voteHistory = JSON.parse(localStorage.getItem('voteHistory')); //console.log(voteHistory)\n\n      this.setState({\n        history: voteHistory\n      });\n    }\n  }\n\n  deleteHistory(e) {\n    // delete one item from history\n    if (localStorage.voteHistory) {\n      const index = e.target.parentElement.parentElement.dataset[\"index\"];\n      let voteHistory = JSON.parse(localStorage.getItem('voteHistory'));\n      voteHistory.splice(index, 1);\n      this.setState({\n        history: voteHistory\n      });\n      voteHistory = _JSON$stringify(voteHistory);\n      localStorage.voteHistory = voteHistory;\n    }\n  }\n\n  clearHistory() {\n    //clear all history\n    if (localStorage.voteHistory) {\n      localStorage.removeItem('voteHistory');\n      this.setState({\n        history: []\n      });\n    }\n  }\n\n  render() {\n    const {\n      history\n    } = this.state;\n    return __jsx(Accordion, {\n      defaultActiveKey: \"0\"\n    }, __jsx(Card, {\n      className: \"vote-history\"\n    }, __jsx(Accordion.Toggle, {\n      as: Card.Header,\n      eventKey: \"0\",\n      style: {\n        cursor: 'pointer'\n      }\n    }, \"Vote History\"), __jsx(Accordion.Collapse, {\n      eventKey: \"0\"\n    }, history.length > 0 ? __jsx(ListGroup, {\n      variant: \"flush\"\n    }, history.map((poll, i) => __jsx(ListGroup.Item, {\n      key: i\n    }, __jsx(Link, {\n      href: {\n        pathname: '/poll',\n        query: {\n          slug: poll.url\n        }\n      },\n      as: `/poll/${poll.url}`\n    }, __jsx(\"a\", {\n      title: poll.title\n    }, poll.title)), __jsx(\"span\", {\n      onClick: this.deleteHistory,\n      \"data-index\": i\n    }, __jsx(FontAwesomeIcon, {\n      icon: faTimes\n    }))))) : __jsx(ListGroup, {\n      variant: \"flush\"\n    }, __jsx(ListGroupItem, null, __jsx(\"i\", null, \"No history...\"))))));\n  }\n\n}\n\nexport default VoteHistory;","map":{"version":3,"sources":["E:/Users/Jordan/Desktop/statmix/components/VoteHistory.js"],"names":["Card","ListGroup","Link","FontAwesomeIcon","faTimes","ListGroupItem","Accordion","VoteHistory","React","Component","constructor","state","history","deleteHistory","bind","clearHistory","componentDidMount","localStorage","voteHistory","JSON","parse","getItem","setState","e","index","target","parentElement","dataset","splice","removeItem","render","Header","cursor","length","map","poll","i","pathname","query","slug","url","title"],"mappings":"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","sourcesContent":["import Card from 'react-bootstrap/Card';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Link from 'next/link';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport ListGroupItem from 'react-bootstrap/ListGroupItem';\nimport Accordion from 'react-bootstrap/Accordion';\n\n\nclass VoteHistory extends React.Component {\n  constructor() {\n    super();\n    \n    this.state = {\n      history: []\n    }\n\n    this.deleteHistory = this.deleteHistory.bind(this);\n    this.clearHistory = this.clearHistory.bind(this);\n  }\n\n  componentDidMount() {\n    // get history from localstorage\n    //console.log(localStorage.voteHistory)\n    if (localStorage.voteHistory) {\n      const voteHistory = JSON.parse(localStorage.getItem('voteHistory'));\n      //console.log(voteHistory)\n      this.setState({ history: voteHistory });\n    }\n  }\n\n  \n  deleteHistory(e) {\n    // delete one item from history\n    if (localStorage.voteHistory) {\n      const index = e.target.parentElement.parentElement.dataset[\"index\"];\n      let voteHistory = JSON.parse(localStorage.getItem('voteHistory'));\n      voteHistory.splice(index, 1);\n      this.setState({ history: voteHistory });\n      voteHistory = JSON.stringify(voteHistory);\n      localStorage.voteHistory = voteHistory;\n    }\n  }\n  \n\n  clearHistory() {\n    //clear all history\n    if (localStorage.voteHistory) {\n      localStorage.removeItem('voteHistory');\n      this.setState({ history: [] });\n    }\n  }\n\n  render() {\n    const { history } = this.state;\n    return (\n      <Accordion defaultActiveKey=\"0\">\n        <Card className='vote-history'>\n        <Accordion.Toggle as={Card.Header} eventKey=\"0\" style={{ cursor: 'pointer' }}>\n          Vote History\n        </Accordion.Toggle>\n        <Accordion.Collapse eventKey=\"0\">\n          { history.length > 0 ?\n            <ListGroup variant=\"flush\">\n              {history.map((poll, i) => (\n                <ListGroup.Item key={i}>\n                  <Link href={{ pathname: '/poll', query: { slug: poll.url } }} as={`/poll/${poll.url}`}>\n                    <a title={poll.title}>{poll.title}</a>\n                  </Link>\n                  <span onClick={this.deleteHistory} data-index={i}>\n                    <FontAwesomeIcon icon={faTimes} />\n                  </span>\n                </ListGroup.Item>\n              ))}\n            </ListGroup> \n          : \n          <ListGroup variant='flush'>\n              <ListGroupItem>\n                <i>No history...</i>\n              </ListGroupItem>\n            </ListGroup>\n          }\n        </Accordion.Collapse>\n        </Card>\n      </Accordion>\n    )\n  }\n}\n\nexport default VoteHistory;"]},"metadata":{},"sourceType":"module"}