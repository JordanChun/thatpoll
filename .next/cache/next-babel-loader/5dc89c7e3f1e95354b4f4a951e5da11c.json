{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../components/Layout';\nimport fetch from 'isomorphic-unfetch';\nimport absoluteUrl from 'next-absolute-url';\nimport PollPagination from '../components/PollPagination';\nimport { withRouter } from 'next/router';\nimport PollCard from '../components/PollCard';\n\nvar Page =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Page, _React$Component);\n\n  _createClass(Page, null, [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var num, req, _absoluteUrl, origin, res, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                num = _ref.query.num, req = _ref.req;\n                _absoluteUrl = absoluteUrl(req), origin = _absoluteUrl.origin;\n                _context.next = 4;\n                return fetch(\"\".concat(origin, \"/api/polls/page/\").concat(num), {\n                  method: 'GET',\n                  headers: {\n                    'X-Origin': 'statmix'\n                  }\n                });\n\n              case 4:\n                res = _context.sent;\n                _context.next = 7;\n                return res.json();\n\n              case 7:\n                data = _context.sent;\n                return _context.abrupt(\"return\", {\n                  polls: data.pollsArr,\n                  totalItems: data.totalItems\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  function Page(props) {\n    _classCallCheck(this, Page);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Page).call(this, props));\n  }\n\n  _createClass(Page, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          polls = _this$props.polls,\n          totalItems = _this$props.totalItems,\n          router = _this$props.router;\n      return __jsx(Layout, {\n        pageTitle: \"StatMix\"\n      }, __jsx(\"h4\", {\n        className: \"page-header\"\n      }, \"Recent Polls\"), __jsx(\"hr\", null), polls.map(function (poll, i) {\n        return __jsx(PollCard, {\n          key: i,\n          poll: poll\n        });\n      }), __jsx(PollPagination, {\n        active: router.query.num,\n        totalItems: totalItems\n      }));\n    }\n  }]);\n\n  return Page;\n}(React.Component);\n\nexport default withRouter(Page);","map":{"version":3,"sources":["E:/Users/Jordan/Desktop/statmix/pages/page.js"],"names":["Layout","fetch","absoluteUrl","PollPagination","withRouter","PollCard","Page","num","query","req","origin","method","headers","res","json","data","polls","pollsArr","totalItems","props","router","map","poll","i","React","Component"],"mappings":";;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,OAAOC,QAAP,MAAqB,wBAArB;;IAEMC,I;;;;;;;;;;;;;;;;;AACoCC,gBAAAA,G,QAATC,K,CAASD,G,EAAOE,G,QAAAA,G;+BAC1BP,WAAW,CAACO,GAAD,C,EAAtBC,M,gBAAAA,M;;uBACUT,KAAK,WAAIS,MAAJ,6BAA6BH,GAA7B,GAAoC;AACzDI,kBAAAA,MAAM,EAAE,KADiD;AAEzDC,kBAAAA,OAAO,EAAE;AACP,gCAAY;AADL;AAFgD,iBAApC,C;;;AAAjBC,gBAAAA,G;;uBAMaA,GAAG,CAACC,IAAJ,E;;;AAAbC,gBAAAA,I;iDAEC;AACLC,kBAAAA,KAAK,EAAED,IAAI,CAACE,QADP;AAELC,kBAAAA,UAAU,EAAEH,IAAI,CAACG;AAFZ,iB;;;;;;;;;;;;;;;;;;AAMT,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA,6EACXA,KADW;AAGlB;;;;6BAEQ;AAAA,wBAC+B,KAAKA,KADpC;AAAA,UACCH,KADD,eACCA,KADD;AAAA,UACQE,UADR,eACQA,UADR;AAAA,UACoBE,MADpB,eACoBA,MADpB;AAGP,aACE,MAAC,MAAD;AAAQ,QAAA,SAAS,EAAC;AAAlB,SACE;AAAI,QAAA,SAAS,EAAC;AAAd,wBADF,EAEE,iBAFF,EAGGJ,KAAK,CAACK,GAAN,CAAU,UAACC,IAAD,EAAOC,CAAP;AAAA,eACT,MAAC,QAAD;AAAU,UAAA,GAAG,EAAEA,CAAf;AAAkB,UAAA,IAAI,EAAED;AAAxB,UADS;AAAA,OAAV,CAHH,EAME,MAAC,cAAD;AAAgB,QAAA,MAAM,EAAEF,MAAM,CAACZ,KAAP,CAAaD,GAArC;AAA0C,QAAA,UAAU,EAAEW;AAAtD,QANF,CADF;AAUD;;;;EAnCgBM,KAAK,CAACC,S;;AAsCzB,eAAerB,UAAU,CAACE,IAAD,CAAzB","sourcesContent":["import Layout from '../components/Layout';\nimport fetch from 'isomorphic-unfetch';\nimport absoluteUrl from 'next-absolute-url';\nimport PollPagination from '../components/PollPagination';\nimport { withRouter } from 'next/router';\nimport PollCard from '../components/PollCard';\n\nclass Page extends React.Component {\n  static async getInitialProps({ query: { num }, req }) {\n    const { origin } = absoluteUrl(req);\n    const res = await fetch(`${origin}/api/polls/page/${num}`, {\n      method: 'GET',\n      headers: {\n        'X-Origin': 'statmix',\n      }\n    });\n    const data = await res.json();\n  \n    return {\n      polls: data.pollsArr,\n      totalItems: data.totalItems\n    }\n  }\n\n  constructor(props) {\n    super(props);\n\n  }\n\n  render() {\n    const { polls, totalItems, router } = this.props;\n\n    return (\n      <Layout pageTitle='StatMix'>\n        <h4 className='page-header'>Recent Polls</h4>\n        <hr />\n        {polls.map((poll, i) => (\n          <PollCard key={i} poll={poll} />\n        ))}\n        <PollPagination active={router.query.num} totalItems={totalItems} />\n      </Layout>\n    )\n  }\n}\n\nexport default withRouter(Page)\n"]},"metadata":{},"sourceType":"module"}